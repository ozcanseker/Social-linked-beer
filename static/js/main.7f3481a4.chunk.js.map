{"version":3,"sources":["assets/Knipsel.png","assets/logo.png","../node_modules/@trust/webcrypto/src/algorithms sync","model/Friend.js","solid/SolidMethods.js","solid/solidCommunicatorInits/PodFolderBuilder.js","error/AccessError.js","solid/solidCommunicatorInits/AccessChecker.js","solid/solidCommunicatorInits/SolidCommunicatorBuilder.js","solid/solidCommunicatorInits/PreApplicationHandelings.js","solid/rdf/SolidTtlTemplates.js","solid/SolidCommunicator.js","component/NavBar.js","routes/page/Home.js","routes/page/LogIn.js","routes/page/Groups.js","routes/page/Friends.js","routes/page/FriendPage.js","routes/page/CheckIns.js","routes/page/BeerResults.js","routes/page/Profile.js","routes/page/User.js","routes/page/Inbox.js","routes/page/BeerDetailScreen.js","routes/AppRoutes.js","routes/extrapage/AclErrorPage.js","routes/extrapage/FetchingPage.js","model/User.js","App.js","serviceWorker.js","index.js","assets/profilePic.png"],"names":["module","exports","webpackEmptyContext","req","e","Error","code","keys","resolve","id","Friend","uri","name","pictureurl","applicationFolder","startdate","points","this","_name","_uri","_imageUrl","_applicationFolder","_startDate","_points","Date","getTime","fileClient","require","authClient","rdfLib","SOLID","Namespace","VCARD","FOAF","LDP","SOLIDLINKEDBEER","postSolidFile","folder","filename","body","a","fetch","method","headers","putSolidFile","url","getUserFile","userttt","graph","status","text","parse","any","undefined","profile","sym","publicProfileIndex","readFile","value","ppiTTL","ppigraph","app","appQuery","nameFN","imageURL","inbox","result","imageUrl","appLocation","fetchFriend","friendUrl","friend","friendAppdataLocation","friendsAppdata","blankNode","rdflib","TERMS","RDF","ACL","appName","buildFolders","storePublicProfileIndex","storagePublic","webId","createAppNodeForPublicTypeIndex","applocation","makeAppFolderStructure","sleep","ms","Promise","setTimeout","checkFolderIntegrity","console","log","store","publicTypeIndex","publicLocation","findEmptyFolder","appLocationNN","add","serialize","newTTLpublicTypeindex","makeRandomString","length","characters","charactersLength","i","charAt","Math","floor","random","appFolderUrl","aclUrl","createFolder","getAclAppFolder","beerDrinkerUrl","getFriendsFile","friendsUrl","appDataFileAcl","appDataFile","getAppDataInit","getAclAppData","getACLInboxFolder","inboxUrl","inboxUrlacl","reviewUrlacl","reviewUrl","getACLSubmittersFriends","bn","appUrl","webIdUserLoggedIn","owner","agent","urlFile","friendsgroup","friendsgroupRequested","_public","resourceUrl","group1","resource","fgroup1","fgroup2","AccessError","args","message","checkacess","storeProfileCard","readAcess","match","Write","Append","Control","PIM","buildSolidCommunicator","user","returnObject","webIdNN","getWebId","getUserCard","getPPILocation","ppiObject","getStorePublic","getApplicationLocation","ppi","applicationLocation","sc","getUserDetails","getAppData","appData","getFriends","friendsData","friends","friendsStore","group","sentGroup","webIdUrl","profileCardTTl","storePublicTypeIndex","publicTypeIndexTTL","appdataLocation","appdatattl","friendsLocation","ttlFriends","query","each","index","push","preApplicationHandelings","scValues","readFolder","inboxContent","acceptedRequests","files","filter","file","includes","declinedRequests","checkAcceptedFriendShipRequests","checkDeclinedFriendShipRequests","postLocation","friendGraph","friendsGroup","friendsSent","filettl","removeMatches","friendFile","addFriend","deleteFile","friendsTtl","getInviteToLSBInvitation","urlInvitee","invitation","userWebId","getFriendShipRequest","getDeclineFriendshipRequest","from","getAcceptFriendshipRequest","description","SolidCommunicator","values","_friendsStore","_friendGroup","_friendsRequested","_user","setName","setImageUrl","addFriends","setBeerPoints","setBeginDate","setApplicationLocation","solidCommunicator","res","fetchFile","fileTTL","blanknode","type","replace","query1","query2","fileName","getName","invitationTTL","checkIfUserIsFriend","fileNameName","location","friendsFile","friendsTTL","declineTTL","getApplocation","acceptedTTL","NavBar","onInput","props","onBeerSearch","target","input","cldn","React","Children","toArray","children","map","child","key","to","className","loggedIn","placeholder","searchQuery","onChange","onClick","onSearchBarButtonClick","Component","Home","src","Knipsel","alt","style","color","LogIn","onChangeCheckBox","setState","loginAsBrewer","state","onButtonClick","solidAuth","popupLogin","popupUri","then","currentSession","session","onLoggedIn","history","onRegisterClick","window","assign","typeLogIn","activeClass","join","Groups","Friends","inputText","toUpperCase","friendUri","getUri","friendUri2","friendUri3","friendUri4","pathname","error","friendsElements","FriendPage","getFriendFromIndex","params","imgUrl","getImageUrl","profilePic","date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","dateToString","getStartDate","getPoints","BeerResults","list","elements","listItem","onLinkClick","Profile","getBeginDate","getBeerPoints","User","onNotJoinedButtonClick","inviteUserToSolib","clicked","sendFriendShipRequest","sendFriendshipRequest","button","disabled","Inbox","declineFriendShipRequest","array","messages","splice","declineFriendSchipRequest","acceptFriendShipRequest","acceptFriendSchipRequest","getInboxContents","items","buttonDiv","BeerDetailScreen","AppRoutes","exact","path","component","isLoggedIn","UserPage","userObject","FriendsPage","clearSearchQuery","CheckIns","PrivateRoute","rest","render","PrivateRouteLogIn","withRouter","AclErrorPage","FetchingPage","_beginDate","_beerPoints","_friends","_applicationLocation","_subscribers","subscriber","update","subscriberList","newFriends","concat","upDateSubScribers","newFriend","beerPoints","beginDate","App","checkLoggedIn","fetchingFiles","subscribe","build","accessError","onClickLogOut","logout","goBack","navBar","Logo","href","Boolean","hostname","ReactDOM","basename","process","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7f3481a4.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Knipsel.4dafcfef.png\";","module.exports = __webpack_public_path__ + \"static/media/logo.bc392ac4.png\";","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 427;","class Friend {\r\n    constructor(uri, name, pictureurl, applicationFolder, startdate, points){\r\n        this._name = name;\r\n        this._uri = uri;\r\n        this._imageUrl = pictureurl;\r\n        this._applicationFolder = applicationFolder;\r\n        this._startDate = startdate;\r\n        this._points = points;\r\n    } \r\n\r\n    getApplocation(){\r\n        return this._applicationFolder;\r\n    }\r\n\r\n    getUri(){\r\n        return this._uri;\r\n    }\r\n\r\n    getImageUrl(){\r\n        return this._imageUrl;\r\n    }\r\n\r\n    getName(){\r\n        return this._name;\r\n    }\r\n\r\n    getStartDate(){\r\n        //send a copy of the date back and not the date itself\r\n        return new Date(this._startDate.getTime())\r\n    }\r\n\r\n    getPoints(){\r\n        return this._points;\r\n    }\r\n}\r\n\r\nexport default Friend;","import Friend from '../model/Friend';\r\n\r\nconst fileClient = require('solid-file-client');\r\nconst authClient = require('solid-auth-client');\r\nconst rdfLib = require('rdflib');\r\n\r\nconst SOLID = rdfLib.Namespace(\"http://www.w3.org/ns/solid/terms#\");\r\nconst VCARD = rdfLib.Namespace(\"http://www.w3.org/2006/vcard/ns#\");\r\nconst FOAF = rdfLib.Namespace('http://xmlns.com/foaf/0.1/');\r\nconst LDP = rdfLib.Namespace('http://www.w3.org/ns/ldp#');\r\nconst SOLIDLINKEDBEER = rdfLib.Namespace('https://ozcanseker.inrupt.net/solidlinkedbeer#');\r\n\r\nexport async function postSolidFile(folder, filename, body) {\r\n  authClient.fetch(folder, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'text/turtle',\r\n      'Link': '<http://www.w3.org/ns/ldp#Resource>; rel=\"type\"',\r\n      'SLUG': filename\r\n    },\r\n    body: body\r\n  });\r\n}\r\n\r\nexport async function putSolidFile(url, body) {\r\n  authClient.fetch(url, {\r\n    method: 'PUT',\r\n    headers: {\r\n      'Content-Type': 'text/turtle'\r\n    },\r\n    body: body\r\n  });\r\n}\r\n\r\n// let body = `INSERT DATA { <${this.state.webId+\"#comment\"}> <${SOLIDLINKEDBEER('points6').value}> <${8}> }`;\r\n// let appDataFile;\r\n// appendSolidResource(appDataFile, {body})\r\n/**\r\n * \r\n * @param {*} url \r\n * @param {*} body \r\n */\r\nexport async function appendSolidResource(url, body) {\r\n  authClient.fetch(url, {\r\n    method: 'PATCH',\r\n    headers: {\r\n      'Content-Type': 'application/sparql-update'\r\n    },\r\n    body: body\r\n  });\r\n}\r\n\r\nexport async function getUserFile(url) {\r\n  let inbox;\r\n\r\n  //get url resource\r\n  let userttt = await authClient.fetch(url);\r\n  let graph = rdfLib.graph();\r\n\r\n  if(userttt.status > 400){\r\n    throw new Error(\"file not found\");\r\n  }\r\n\r\n  userttt = await userttt.text();\r\n\r\n  try {\r\n    //parse to check if it is ttl\r\n    rdfLib.parse(userttt, graph, url, \"text/turtle\");\r\n\r\n    //check if it is a profile card\r\n    let query = graph.any(undefined, undefined, FOAF('PersonalProfileDocument'));\r\n\r\n    if (query) {\r\n      let profile = rdfLib.sym(url);\r\n\r\n      //check if user has ppi\r\n      const publicProfileIndex = graph.any(profile, SOLID(\"publicTypeIndex\"));\r\n\r\n      if (publicProfileIndex) {\r\n        let ppiTTL = await fileClient.readFile(publicProfileIndex.value);\r\n        let ppigraph = rdfLib.graph();\r\n        rdfLib.parse(ppiTTL, ppigraph, publicProfileIndex.value, \"text/turtle\");\r\n\r\n        let app = rdfLib.sym(publicProfileIndex.value + \"#SocialLinkedBeer\");\r\n        let appQuery = ppigraph.any(app, SOLID(\"instance\"));\r\n\r\n        //get name and Image            \r\n        let nameFN = graph.any(profile, VCARD('fn'));\r\n        let imageURL = graph.any(profile, VCARD('hasPhoto'));\r\n\r\n        if (!appQuery) {\r\n          inbox = graph.any(profile, LDP('inbox'));\r\n        }\r\n\r\n        //applocation is not of beerdrinker\r\n        let result = {\r\n          url: url,\r\n          name: nameFN ? nameFN.value : undefined,\r\n          imageUrl: imageURL ? imageURL.value : undefined,\r\n          appLocation: appQuery ? appQuery.value : undefined,\r\n          inbox: inbox ? inbox.value : undefined\r\n        }\r\n\r\n        return result;\r\n      } else {\r\n        throw new Error(\"no ppi\");\r\n      }\r\n    } else {\r\n      throw new Error(\"not a profile card\");\r\n    }\r\n  } catch (err) {\r\n    throw new Error(\"Not a correct profile linked data file\");\r\n  }\r\n}\r\n\r\n/**\r\n * \r\n * @param {String} friendUrl \r\n */\r\nexport async function fetchFriend(friendUrl){\r\n  let friend = await getUserFile(friendUrl);\r\n\r\n  let friendAppdataLocation = friend.appLocation + 'beerdrinker/appdata.ttl';\r\n  let friendsAppdata = await fileClient.readFile(friendAppdataLocation);\r\n\r\n  let graph = rdfLib.graph();\r\n  rdfLib.parse(friendsAppdata, graph, friendAppdataLocation, \"text/turtle\");\r\n\r\n  let blankNode = graph.any(undefined, SOLIDLINKEDBEER('startdate'));\r\n\r\n  let startdate = graph.any(blankNode, SOLIDLINKEDBEER('startdate'));\r\n  let points = graph.any(blankNode, SOLIDLINKEDBEER('points'));\r\n\r\n  return new Friend(friendUrl, friend.name, friend.imageUrl, friend.appLocation, new Date(startdate.value), points.value);\r\n}","import { postSolidFile, putSolidFile, getUserFile } from \"../SolidMethods\";\r\n\r\nconst fileClient = require('solid-file-client');\r\nconst authClient = require('solid-auth-client');\r\nconst rdflib = require('rdflib');\r\n\r\nconst SOLID = rdflib.Namespace(\"http://www.w3.org/ns/solid/terms#\");\r\nconst VCARD = rdflib.Namespace(\"http://www.w3.org/2006/vcard/ns#\");\r\nconst TERMS = rdflib.Namespace('http://purl.org/dc/terms/');\r\nconst RDF = rdflib.Namespace(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\");\r\nconst SOLIDLINKEDBEER = rdflib.Namespace('https://ozcanseker.inrupt.net/solidlinkedbeer#');\r\nconst FOAF = rdflib.Namespace('http://xmlns.com/foaf/0.1/');\r\nconst ACL = rdflib.Namespace(\"http://www.w3.org/ns/auth/acl#\");\r\n\r\nconst appName = \"sociallinkedbeer\";\r\n\r\nexport async function buildFolders(publicProfileIndex, storePublicProfileIndex, storagePublic, app, webId) {\r\n  //TODO a whole lot of error checking. Checking for 400 error codes and stuff like that\r\n  let applocation = await createAppNodeForPublicTypeIndex(storePublicProfileIndex, publicProfileIndex, storagePublic, app);\r\n  await makeAppFolderStructure(applocation, webId);\r\n\r\n  //sleep zodat de server de requests kan verwerken\r\n  await sleep(2000);\r\n\r\n  return applocation;\r\n}\r\n\r\nfunction sleep(ms) {\r\n  return new Promise(resolve => {\r\n    setTimeout(resolve, ms)\r\n  })\r\n}\r\n\r\nexport async function checkFolderIntegrity() {\r\n  //TODO Check integrity\r\n  console.log(\"TODO checkFolderIntegrity\");\r\n}\r\n\r\n/**\r\n * Adds the applicatioin to the public type index\r\n * @param {store} store \r\n * @param {NN} publicTypeIndex \r\n * @param {string} publicLocation \r\n * @param {string} app \r\n */\r\nasync function createAppNodeForPublicTypeIndex(store, publicTypeIndex, publicLocation, app) {\r\n  //find empty folder\r\n  let appLocation = await findEmptyFolder(publicLocation);\r\n\r\n  //create a named node for the app\r\n  let appLocationNN = rdflib.sym(appLocation);\r\n\r\n  //add values to the pti\r\n  store.add(publicTypeIndex, TERMS('references'), app);\r\n  store.add(app, RDF('type'), SOLID('TypeRegistration'));\r\n  store.add(app, SOLID('instance'), appLocationNN);\r\n\r\n  //serialize and send the pti\r\n  let newTTLpublicTypeindex = await rdflib.serialize(undefined, store, publicTypeIndex.value, 'text/turtle');\r\n  await putSolidFile(publicTypeIndex.value, newTTLpublicTypeindex);\r\n\r\n  return appLocation;\r\n}\r\n\r\n/**\r\n * Finds an empty folder for the application\r\n * @param {} publicLocation \r\n */\r\nasync function findEmptyFolder(publicLocation) {\r\n  //TODO improve this. You can check if the other folder holds up to your standards. A lot of possibilities\r\n  let appLocation = publicLocation + appName + '/'\r\n\r\n  //see if there is a folder at the applocation\r\n  let res = await authClient.fetch(appLocation);\r\n\r\n  //make eiher a new random foldername or use the original\r\n  if (res.status % 400 < 100) {\r\n    return appLocation;\r\n  } else {\r\n    return appLocation = publicLocation + appName + makeRandomString(10) + '/'\r\n  }\r\n}\r\n\r\n/**\r\n * Makes a random string\r\n * @param {int} length \r\n */\r\nfunction makeRandomString(length) {\r\n  var result = '';\r\n  var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n  var charactersLength = characters.length;\r\n  for (var i = 0; i < length; i++) {\r\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n  }\r\n  return result;\r\n}\r\n\r\n/**\r\n * Makes the folder struckture for the application\r\n * @param {string} appFolderUrl \r\n * @param {string} webId \r\n */\r\nasync function makeAppFolderStructure(appFolderUrl, webId) {\r\n  //TODO make all async\r\n  let body;\r\n\r\n  //top folder\r\n  let aclUrl = appFolderUrl + '.acl';\r\n\r\n  await fileClient.createFolder(appFolderUrl);\r\n  body = getAclAppFolder(appFolderUrl, aclUrl, webId);\r\n  await putSolidFile(aclUrl, body);\r\n\r\n  //beerdrinker\r\n  let beerDrinkerUrl = appFolderUrl + \"beerdrinker/\";\r\n  await fileClient.createFolder(beerDrinkerUrl);\r\n\r\n  // friends\r\n  let friendsUrl = beerDrinkerUrl + 'friends.ttl';\r\n  body = getFriendsFile(friendsUrl, webId);\r\n\r\n  await postSolidFile(beerDrinkerUrl, 'friends', body);\r\n\r\n  //appData \r\n  let appDataFile = beerDrinkerUrl + 'appdata.ttl';\r\n  let appDataFileAcl = appDataFile + '.acl';\r\n  \r\n  body = getAppDataInit(appDataFile);\r\n  await postSolidFile(beerDrinkerUrl, 'appdata', body);\r\n  \r\n  body = getAclAppData(appDataFile, appDataFileAcl, webId, friendsUrl);\r\n  await putSolidFile(appDataFileAcl, body);\r\n\r\n  //inboxfolder\r\n  let inboxUrl = beerDrinkerUrl + 'inbox/';\r\n  let inboxUrlacl = inboxUrl + '.acl';\r\n  body = getACLInboxFolder(inboxUrl, inboxUrlacl, webId);\r\n\r\n  await fileClient.createFolder(inboxUrl);\r\n  await putSolidFile(inboxUrlacl, body);\r\n\r\n  //check in folder        \r\n  let reviewUrl = beerDrinkerUrl + 'checkins/';\r\n  let reviewUrlacl = reviewUrl + '.acl';\r\n\r\n  await fileClient.createFolder(reviewUrl);\r\n  body = getACLSubmittersFriends(reviewUrl, reviewUrlacl, webId, friendsUrl);\r\n  await putSolidFile(reviewUrlacl, body);\r\n}\r\n\r\n/**\r\n * The init file for the appdata\r\n * @param {string} url \r\n */\r\nfunction getAppDataInit(url) {\r\n  let graph = rdflib.graph();\r\n\r\n  let bn = rdflib.blankNode();\r\n\r\n  graph.add(bn, SOLIDLINKEDBEER('startdate'), new Date());\r\n  graph.add(bn, SOLIDLINKEDBEER('points'), 0);\r\n\r\n  let ttl = rdflib.serialize(undefined, graph, url, 'text/turtle');\r\n  return ttl;\r\n}\r\n\r\n/**\r\n * Makes the acl for the app folder\r\n * Only owner can see, write and control\r\n * @param {*} appUrl \r\n * @param {*} aclUrl \r\n * @param {*} webIdUserLoggedIn \r\n */\r\nfunction getAclAppFolder(appUrl, aclUrl, webIdUserLoggedIn) {\r\n  let graph = rdflib.graph();\r\n  let owner = rdflib.sym(aclUrl + \"#Owner\");\r\n  let app = rdflib.sym(appUrl);\r\n  let agent = rdflib.sym(webIdUserLoggedIn);\r\n\r\n  graph.add(owner, RDF('type'), ACL('Authorization'));\r\n\r\n  graph.add(owner, ACL('accessTo'), app);\r\n  graph.add(owner, ACL('default'), app);\r\n  graph.add(owner, ACL('agent'), agent);\r\n\r\n  graph.add(owner, ACL('mode'), ACL('Control'));\r\n  graph.add(owner, ACL('mode'), ACL('Read'));\r\n  graph.add(owner, ACL('mode'), ACL('Write'));\r\n\r\n  return rdflib.serialize(undefined, graph, aclUrl, 'text/turtle');\r\n}\r\n\r\n/**\r\n * Init for the friends file\r\n * @param {string} urlFile \r\n * @param {*} webId \r\n */\r\nfunction getFriendsFile(urlFile) {\r\n  let graph = rdflib.graph();\r\n\r\n  let friendsgroup = rdflib.sym(urlFile + \"#Friends\");\r\n  let friendsgroupRequested = rdflib.sym(urlFile + \"#FriendsRequested\");\r\n\r\n  graph.add(friendsgroup, RDF('type'), VCARD('Group'));\r\n  graph.add(friendsgroup, VCARD('hasUID'), rdflib.sym(\"urn:uuid:8831CBAD-1111-2222-8563-F0F4787E5398:ABGroup\"));\r\n\r\n  graph.add(friendsgroupRequested, RDF('type'), VCARD('Group'));\r\n  graph.add(friendsgroupRequested, VCARD('hasUID'), rdflib.sym(\"urn:uuid:8831CBAD-1111-2222-8563-F0F4787E5398:CDGroup\"));\r\n\r\n  return rdflib.serialize(undefined, graph, urlFile, 'text/turtle');\r\n}\r\n\r\n/**\r\n * Get the acl for the inbox folder. Everyone can write but only owner can read\r\n * @param {} inboxUrl \r\n * @param {*} aclUrl \r\n * @param {*} webIdUserLoggedIn \r\n */\r\nfunction getACLInboxFolder(inboxUrl, aclUrl, webIdUserLoggedIn) {\r\n  let graph = rdflib.graph();\r\n  let owner = rdflib.sym(aclUrl + \"#Owner\");\r\n  let _public = rdflib.sym(aclUrl + \"#Public\");\r\n  let inbox = rdflib.sym(inboxUrl);\r\n  let agent = rdflib.sym(webIdUserLoggedIn);\r\n\r\n  //owner\r\n  graph.add(owner, RDF('type'), ACL('Authorization'));\r\n\r\n  graph.add(owner, ACL('accessTo'), inbox);\r\n  graph.add(owner, ACL('default'), inbox);\r\n  graph.add(owner, ACL('agent'), agent);\r\n\r\n  graph.add(owner, ACL('mode'), ACL('Control'));\r\n  graph.add(owner, ACL('mode'), ACL('Read'));\r\n  graph.add(owner, ACL('mode'), ACL('Write'));\r\n\r\n  //public\r\n  graph.add(_public, RDF('type'), ACL('Authorization'));\r\n\r\n  graph.add(_public, ACL('accessTo'), inbox);\r\n  graph.add(_public, ACL('default'), inbox);\r\n  graph.add(_public, ACL('agentClass'), FOAF(\"Agent\"));\r\n\r\n  graph.add(_public, ACL('mode'), ACL('Append'));\r\n\r\n  return rdflib.serialize(undefined, graph, aclUrl, 'text/turtle');\r\n}\r\n\r\n/**\r\n * Acl check in folder. Friend and user can read\r\n * @param {*} resourceUrl \r\n * @param {*} aclUrl \r\n * @param {*} webIdUserLoggedIn \r\n * @param {*} friendsUrl \r\n */\r\nfunction getACLSubmittersFriends(resourceUrl, aclUrl, webIdUserLoggedIn, friendsUrl) {\r\n  let graph = rdflib.graph();\r\n  let owner = rdflib.sym(aclUrl + \"#Owner\");\r\n  let group1 = rdflib.sym(aclUrl + \"#Friends\");\r\n  let resource = rdflib.sym(resourceUrl);\r\n  let agent = rdflib.sym(webIdUserLoggedIn);\r\n\r\n  //group who get acess\r\n  let fgroup1 = rdflib.sym(friendsUrl + \"#Friends\");\r\n  let fgroup2 = rdflib.sym(friendsUrl + \"#FriendsRequested\");\r\n\r\n  //owner\r\n  graph.add(owner, RDF('type'), ACL('Authorization'));\r\n\r\n  graph.add(owner, ACL('accessTo'), resource);\r\n  graph.add(owner, ACL('default'), resource);\r\n  graph.add(owner, ACL('agent'), agent);\r\n\r\n  graph.add(owner, ACL('mode'), ACL('Control'));\r\n  graph.add(owner, ACL('mode'), ACL('Read'));\r\n  graph.add(owner, ACL('mode'), ACL('Write'));\r\n\r\n  //public\r\n  graph.add(group1, RDF('type'), ACL('Authorization'));\r\n\r\n  graph.add(group1, ACL('accessTo'), resource);\r\n  graph.add(group1, ACL('default'), resource);\r\n\r\n  graph.add(group1, ACL('agentGroup'), fgroup1);\r\n  graph.add(group1, ACL('agentGroup'), fgroup2);\r\n\r\n  graph.add(group1, ACL('mode'), ACL('Read'));\r\n  graph.add(group1, ACL('mode'), ACL('Append'));\r\n\r\n  return rdflib.serialize(undefined, graph, aclUrl, 'text/turtle');\r\n}\r\n\r\n/**\r\n * Acl app file. Friend and user can read\r\n * @param {*} resourceUrl \r\n * @param {*} aclUrl \r\n * @param {*} webIdUserLoggedIn \r\n * @param {*} friendsUrl \r\n */\r\nfunction getAclAppData(resourceUrl, aclUrl, webIdUserLoggedIn, friendsUrl) {\r\n  let graph = rdflib.graph();\r\n  let owner = rdflib.sym(aclUrl + \"#Owner\");\r\n  let group1 = rdflib.sym(aclUrl + \"#Friends\");\r\n  let resource = rdflib.sym(resourceUrl);\r\n  let agent = rdflib.sym(webIdUserLoggedIn);\r\n\r\n  //group who get acess\r\n  let fgroup1 = rdflib.sym(friendsUrl + \"#Friends\");\r\n  let fgroup2 = rdflib.sym(friendsUrl + \"#FriendsRequested\");\r\n\r\n  //owner\r\n  graph.add(owner, RDF('type'), ACL('Authorization'));\r\n\r\n  graph.add(owner, ACL('accessTo'), resource);\r\n  graph.add(owner, ACL('default'), resource);\r\n  graph.add(owner, ACL('agent'), agent);\r\n\r\n  graph.add(owner, ACL('mode'), ACL('Control'));\r\n  graph.add(owner, ACL('mode'), ACL('Read'));\r\n  graph.add(owner, ACL('mode'), ACL('Write'));\r\n\r\n  //public\r\n  graph.add(group1, RDF('type'), ACL('Authorization'));\r\n\r\n  graph.add(group1, ACL('accessTo'), resource);\r\n  graph.add(group1, ACL('default'), resource);\r\n\r\n  graph.add(group1, ACL('agentGroup'), fgroup1);\r\n  graph.add(group1, ACL('agentGroup'), fgroup2);\r\n\r\n  graph.add(group1, ACL('mode'), ACL('Read'));\r\n\r\n  return rdflib.serialize(undefined, graph, aclUrl, 'text/turtle');\r\n}","class AccessError extends Error {\r\n    constructor(...args) {\r\n        super(...args);\r\n\r\n        this.message = \"Access file is not correct\";\r\n    }\r\n}\r\n\r\nexport default AccessError;","import AccessError from '../../error/AccessError' \r\n\r\nconst rdfLib = require('rdflib');\r\n\r\nconst ACL = rdfLib.Namespace(\"http://www.w3.org/ns/auth/acl#\");\r\n\r\nexport function checkacess(storeProfileCard){\r\n    let blankNode = storeProfileCard.any(undefined, ACL('origin'),rdfLib.sym(\"https://ozcanseker.github.io\"));\r\n    let readAcess = storeProfileCard.match(blankNode, ACL('mode'), ACL('Read'));\r\n    let Write = storeProfileCard.match(blankNode, ACL('mode'),ACL('Write'));\r\n    let Append = storeProfileCard.match(blankNode, ACL('mode'),ACL('Append'));\r\n    let Control = storeProfileCard.match(blankNode, ACL('mode'),ACL('Control'));\r\n\r\n    if(!readAcess.length){\r\n        throw new AccessError();\r\n    }\r\n\r\n    if(!Write.length){\r\n        throw new AccessError();\r\n    }\r\n\r\n    if(!Append.length){\r\n        throw new AccessError();\r\n    }\r\n\r\n    if(!Control.length){\r\n        throw new AccessError();\r\n    }\r\n}","import { buildFolders, checkFolderIntegrity } from './PodFolderBuilder'\r\nimport { postSolidFile, putSolidFile, getUserFile, fetchFriend } from \"../SolidMethods\";\r\nimport Friend from '../../model/Friend';\r\nimport {checkacess} from './AccessChecker'\r\n\r\nconst fileClient = require('solid-file-client');\r\nconst authClient = require('solid-auth-client');\r\nconst rdfLib = require('rdflib');\r\n\r\nconst SOLID = rdfLib.Namespace( \"http://www.w3.org/ns/solid/terms#\");\r\nconst VCARD = rdfLib.Namespace(\"http://www.w3.org/2006/vcard/ns#\");\r\nconst TERMS = rdfLib.Namespace('http://purl.org/dc/terms/');\r\nconst RDF = rdfLib.Namespace(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\");\r\nconst SOLIDLINKEDBEER = rdfLib.Namespace('https://ozcanseker.inrupt.net/solidlinkedbeer#');\r\nconst FOAF = rdfLib.Namespace('http://xmlns.com/foaf/0.1/');\r\nconst ACL = rdfLib.Namespace(\"http://www.w3.org/ns/auth/acl#\");\r\nconst PIM = rdfLib.Namespace(\"http://www.w3.org/ns/pim/space#\");\r\nconst LDP = rdfLib.Namespace('http://www.w3.org/ns/ldp#');\r\n\r\nexport async function buildSolidCommunicator(user){\r\n  //TODO do some thing parallel\r\n  //TODO check acl\r\n    let returnObject = {};\r\n\r\n    //make a named node of the session webid of the user\r\n    //namednode\r\n    const webIdNN = rdfLib.sym(user.getWebId());\r\n\r\n    //get a store of the profile card of the logged in user\r\n    //store\r\n    let storeProfileCard = await getUserCard(webIdNN.uri);\r\n\r\n    //check the acess before trying to make an application\r\n    checkacess(storeProfileCard);\r\n     \r\n    //store for the Public Profile Index\r\n    //object with store and nn\r\n    let ppiObject = await getPPILocation(webIdNN, storeProfileCard);\r\n\r\n    //String that shows the location of the public storage of the pod\r\n    //string \r\n    let storagePublic = await getStorePublic(webIdNN, storeProfileCard);     \r\n\r\n    //locatie voor de applicatie\r\n    //string\r\n    let applicationLocation = await getApplicationLocation(ppiObject.ppi , ppiObject.store, storagePublic, webIdNN.value);\r\n\r\n\r\n    //returnobject\r\n    returnObject.sc = {};\r\n    returnObject.user = {};\r\n\r\n    returnObject.user = getUserDetails(webIdNN, storeProfileCard);\r\n    let appData = await getAppData(applicationLocation);\r\n\r\n    returnObject.user = {...returnObject.user , ...appData};\r\n    \r\n    let friendsData = await getFriends(applicationLocation);\r\n    returnObject.user.friends = friendsData.friends;\r\n    returnObject.sc.friendsStore = friendsData.friendsStore;\r\n    returnObject.sc.group = friendsData.group;\r\n    returnObject.sc.sentGroup = friendsData.sentGroup;\r\n  \r\n    returnObject.user.applicationLocation = applicationLocation;\r\n\r\n    return returnObject;\r\n}\r\n\r\nfunction getUserDetails(profile, storeProfileCard){\r\n  let nameFN =  storeProfileCard.any(profile,VCARD('fn'));\r\n  let imageURL =  storeProfileCard.any(profile,VCARD('hasPhoto')); \r\n\r\n  nameFN = nameFN ? nameFN.value : undefined;\r\n  imageURL = imageURL ? imageURL.value : undefined;\r\n\r\n  return {name: nameFN, imageURL: imageURL};\r\n}\r\n\r\nasync function getUserCard(webIdUrl){\r\n    const profileCardTTl = await fileClient.fetch(webIdUrl); \r\n    const storeProfileCard = rdfLib.graph(); \r\n    rdfLib.parse(profileCardTTl, storeProfileCard, webIdUrl, \"text/turtle\");\r\n    \r\n    return storeProfileCard;\r\n}\r\n\r\nasync function getPPILocation(profile, storeProfileCard){\r\n    const publicProfileIndex = storeProfileCard.any(profile, SOLID(\"publicTypeIndex\"));\r\n    \r\n    const storePublicTypeIndex = rdfLib.graph();\r\n    const publicTypeIndexTTL = await fileClient.fetch(publicProfileIndex.value);\r\n    rdfLib.parse(publicTypeIndexTTL, storePublicTypeIndex, publicProfileIndex.value, \"text/turtle\");\r\n    \r\n    return {store : storePublicTypeIndex, ppi : publicProfileIndex};\r\n}\r\n\r\nfunction getStorePublic(profile, storeProfileCard){\r\n    let locationStorage = storeProfileCard.any(profile, PIM(\"storage\"));\r\n    return locationStorage.value + \"public/\";\r\n}\r\n\r\nasync function getApplicationLocation(publicProfileIndex, storePublicProfileIndex, storagePublic, webId){\r\n    let app = rdfLib.sym(publicProfileIndex.value + \"#SocialLinkedBeer\");\r\n    let appQuery = storePublicProfileIndex.any(app, SOLID(\"instance\"));\r\n\r\n    if(appQuery){\r\n      checkFolderIntegrity();\r\n      return appQuery.value;\r\n    }else{\r\n        return await buildFolders(publicProfileIndex, storePublicProfileIndex, storagePublic, app, webId);\r\n    }\r\n}\r\n\r\nasync function getAppData(url){\r\n  //TODO one place to save all urls\r\n  let appdataLocation = url + 'beerdrinker/appdata.ttl';\r\n\r\n  let appdatattl = await fileClient.readFile(appdataLocation);\r\n  let graph = rdfLib.graph();\r\n  rdfLib.parse(appdatattl, graph, appdataLocation, \"text/turtle\");\r\n\r\n  let blankNode = graph.any(undefined, SOLIDLINKEDBEER('startdate'));\r\n\r\n  let startdate = graph.any(blankNode, SOLIDLINKEDBEER('startdate'));\r\n  let points = graph.any(blankNode, SOLIDLINKEDBEER('points'));\r\n  \r\n  return {startdate: startdate.value, points: points.value}\r\n}\r\n\r\n async function getFriends(applicationLocation){\r\n  let friendsLocation = applicationLocation + 'beerdrinker/friends.ttl';\r\n  let ttlFriends = await fileClient.readFile(friendsLocation);\r\n  let group = rdfLib.sym(friendsLocation + \"#Friends\");\r\n  let sentGroup = rdfLib.sym(friendsLocation + \"#FriendsRequested\");\r\n\r\n  let friends = [];\r\n\r\n  let graph = rdfLib.graph();\r\n  rdfLib.parse(ttlFriends, graph, friendsLocation, \"text/turtle\");\r\n\r\n  let query = graph.each(group, VCARD('hasMember'), undefined); \r\n\r\n  for (let index = 0; index < query.length; index++) {\r\n    let friend = await fetchFriend(query[index].value);\r\n    friends.push(friend);\r\n  }\r\n\r\n  return {friends: friends, friendsStore: graph, group: group, sentGroup: sentGroup};\r\n}\r\n ","import { postSolidFile, putSolidFile, getUserFile, fetchFriend } from \"../SolidMethods\";\r\nimport Friend from '../../model/Friend'\r\n\r\nconst fileClient = require('solid-file-client');\r\nconst rdfLib = require('rdflib');\r\n\r\nconst VCARD = rdfLib.Namespace(\"http://www.w3.org/2006/vcard/ns#\");\r\nconst SOLIDLINKEDBEER = rdfLib.Namespace('https://ozcanseker.inrupt.net/solidlinkedbeer#');\r\n\r\nexport async function preApplicationHandelings(applicationFolder, scValues, user){\r\n    let inbox = applicationFolder + \"inbox/\";\r\n    let inboxContent = await fileClient.readFolder(inbox);\r\n\r\n    //add friend from friend requested to friends\r\n    let acceptedRequests = inboxContent.files.filter(file => {\r\n        return file.name.includes(\"Social_Linked_Beer_FriendschipRequestAccepted\");\r\n    })\r\n    \r\n    //delete user from friends requested if they declined\r\n    let declinedRequests = inboxContent.files.filter(file => {\r\n        return file.name.includes(\"Social_Linked_Beer_FriendschipRequestDecline\");\r\n    })\r\n    \r\n    if(acceptedRequests.length != 0){\r\n        await checkAcceptedFriendShipRequests(applicationFolder, acceptedRequests, scValues, user);\r\n    }\r\n\r\n    if(declinedRequests.length != 0){\r\n        await checkDeclinedFriendShipRequests(applicationFolder, declinedRequests, scValues);\r\n    }\r\n}\r\n\r\n/**\r\n * Check if there are accepted friendschip requests\r\n * @param {*} applicationFolder \r\n * @param {*} acceptedRequests \r\n * @param {*} scValues \r\n * @param {*} user \r\n */\r\nasync function checkAcceptedFriendShipRequests(applicationFolder,acceptedRequests, scValues, user){\r\n    //get some values\r\n    let postLocation = applicationFolder + 'friends.ttl';\r\n    let friendGraph = scValues.friendsStore;\r\n    let friendsGroup = scValues.group;\r\n    let friendsSent = scValues.sentGroup;\r\n\r\n    for(let i = 0; i < acceptedRequests.length; i++){\r\n        //make a graph and get file\r\n        let graph = rdfLib.graph();\r\n        let filettl = await fileClient.readFile(acceptedRequests[i].url);\r\n        rdfLib.parse(filettl, graph, acceptedRequests[i].url, \"text/turtle\");\r\n\r\n        //get the blanknode from the message\r\n        let friend = graph.any(undefined, SOLIDLINKEDBEER('from'));\r\n        friend = graph.any(friend, SOLIDLINKEDBEER('from'));\r\n\r\n        //add from friend requested to friend\r\n        friendGraph.add(friendsGroup, VCARD('hasMember'), friend);\r\n        friendGraph.removeMatches(friendsSent, VCARD('hasMember'), friend);\r\n\r\n        //get the friend from the internet\r\n        let friendFile = await fetchFriend(friend.value);\r\n\r\n        //adding friend\r\n        user.addFriend(friendFile);\r\n\r\n        //delete the original message\r\n        await fileClient.deleteFile(acceptedRequests[i].url);\r\n    }\r\n\r\n    //update the original friend file\r\n    let friendsTtl = await rdfLib.serialize(undefined, friendGraph, postLocation, 'text/turtle');\r\n    //TODO post new file for user so that he know friendship is accepted\r\n    putSolidFile(postLocation, friendsTtl);\r\n}\r\n\r\nasync function checkDeclinedFriendShipRequests(applicationFolder,declinedRequests, scValues){\r\n    let postLocation = applicationFolder + 'friends.ttl';\r\n    let friendGraph = scValues.friendsStore;\r\n    let friendsSent = scValues.sentGroup;\r\n    \r\n    for(let i = 0; i < declinedRequests.length; i++){\r\n        let graph = rdfLib.graph();\r\n        let filettl = await fileClient.readFile(declinedRequests[i].url);\r\n        \r\n        rdfLib.parse(filettl, graph, declinedRequests[i].url, \"text/turtle\");\r\n\r\n        //get blank node from friend sent\r\n        let friend = graph.any(undefined, SOLIDLINKEDBEER('from'));\r\n        friend = graph.any(friend, SOLIDLINKEDBEER('from'));\r\n\r\n        //remove friend from the friendssent file\r\n        friendGraph.removeMatches(friendsSent, VCARD('hasMember'), friend);\r\n        \r\n        //delete the message        \r\n        await fileClient.deleteFile(declinedRequests[i].url);\r\n    }\r\n\r\n    //post new friend solid file\r\n    let friendsTtl = await rdfLib.serialize(undefined, friendGraph, postLocation, 'text/turtle');\r\n    putSolidFile(postLocation, friendsTtl);\r\n\r\n    //TODO post new file for user so that he know friendship is declined\r\n}","const rdfLib = require('rdflib');\r\n\r\nconst SOLID = rdfLib.Namespace( \"http://www.w3.org/ns/solid/terms#\");\r\nconst PIM = rdfLib.Namespace(\"http://www.w3.org/ns/pim/space#\");\r\nconst VCARD = rdfLib.Namespace(\"http://www.w3.org/2006/vcard/ns#\");\r\nconst TERMS = rdfLib.Namespace('http://purl.org/dc/terms/');\r\nconst RDF = rdfLib.Namespace(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\");\r\nconst SOLIDLINKEDBEER = rdfLib.Namespace('https://ozcanseker.inrupt.net/solidlinkedbeer#');\r\nconst FOAF = rdfLib.Namespace('http://xmlns.com/foaf/0.1/');\r\nconst LDP = rdfLib.Namespace('http://www.w3.org/ns/ldp#');\r\n\r\nexport function getInviteToLSBInvitation(urlInvitee, invitation, postLocation, userWebId){\r\n    let graph = rdfLib.graph();\r\n    let blankNode = rdfLib.blankNode();\r\n\r\n    graph.add(blankNode, RDF('type'), SOLIDLINKEDBEER('Invitation'));\r\n    graph.add(blankNode, SOLIDLINKEDBEER('invitationTo'), rdfLib.sym('https://ozcanseker.github.io/Social-linked-beer/'));\r\n    graph.add(blankNode, SOLIDLINKEDBEER('from'), rdfLib.sym(userWebId));\r\n    graph.add(blankNode, SOLIDLINKEDBEER('to'), rdfLib.sym(urlInvitee));\r\n    graph.add(blankNode, SOLIDLINKEDBEER('description'), invitation);\r\n\r\n    return rdfLib.serialize(undefined, graph, postLocation, 'text/turtle');\r\n}\r\n\r\nexport function getFriendShipRequest(urlInvitee, invitation, postLocation, userWebId){\r\n    //make friendrequest\r\n    let graph = rdfLib.graph();\r\n    let blankNode = rdfLib.blankNode();\r\n\r\n    graph.add(blankNode, RDF('type'), SOLIDLINKEDBEER('FriendshipRequest'));\r\n    graph.add(blankNode, SOLIDLINKEDBEER('from'), rdfLib.sym(userWebId));\r\n    graph.add(blankNode, SOLIDLINKEDBEER('to'), rdfLib.sym(urlInvitee));\r\n    graph.add(blankNode, SOLIDLINKEDBEER('description'), invitation);\r\n\r\n    return rdfLib.serialize(undefined, graph, postLocation, 'text/turtle');\r\n}\r\n\r\nexport function getDeclineFriendshipRequest(from , invitation, postLocation, userWebId){\r\n    let graph = rdfLib.graph();\r\n    let blankNode = rdfLib.blankNode();\r\n\r\n    graph.add(blankNode, RDF('type'), SOLIDLINKEDBEER('FriendschipRequestDecline'));\r\n    graph.add(blankNode, SOLIDLINKEDBEER('from'), rdfLib.sym(userWebId));\r\n    graph.add(blankNode, SOLIDLINKEDBEER('to'), rdfLib.sym(from));\r\n    graph.add(blankNode, SOLIDLINKEDBEER('description'), invitation);\r\n\r\n    return rdfLib.serialize(undefined, graph, postLocation, 'text/turtle');\r\n}\r\n\r\nexport function getAcceptFriendshipRequest(from, description , postLocation, userWebId){\r\n    let graph = rdfLib.graph();\r\n    let blankNode = rdfLib.blankNode();\r\n\r\n    graph.add(blankNode, RDF('type'), SOLIDLINKEDBEER('FriendschipRequestAccepted'));\r\n    graph.add(blankNode, SOLIDLINKEDBEER('from'), rdfLib.sym(userWebId));\r\n    graph.add(blankNode, SOLIDLINKEDBEER('to'), rdfLib.sym(from));\r\n    graph.add(blankNode, SOLIDLINKEDBEER('description'), description);\r\n\r\n    //make a text file and send\r\n    return rdfLib.serialize(undefined, graph, postLocation, 'text/turtle');\r\n}","import { postSolidFile, putSolidFile, getUserFile, fetchFriend } from \"./SolidMethods\";\r\nimport Friend from '../model/Friend'\r\nimport { buildSolidCommunicator } from './solidCommunicatorInits/SolidCommunicatorBuilder'\r\nimport { preApplicationHandelings } from './solidCommunicatorInits/PreApplicationHandelings'\r\nimport { getInviteToLSBInvitation, getDeclineFriendshipRequest, getFriendShipRequest, getAcceptFriendshipRequest} from './rdf/SolidTtlTemplates'\r\n\r\nconst fileClient = require('solid-file-client');\r\nconst authClient = require('solid-auth-client');\r\nconst rdfLib = require('rdflib');\r\n\r\nconst SOLID = rdfLib.Namespace(\"http://www.w3.org/ns/solid/terms#\");\r\nconst PIM = rdfLib.Namespace(\"http://www.w3.org/ns/pim/space#\");\r\nconst VCARD = rdfLib.Namespace(\"http://www.w3.org/2006/vcard/ns#\");\r\nconst TERMS = rdfLib.Namespace('http://purl.org/dc/terms/');\r\nconst RDF = rdfLib.Namespace(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\");\r\nconst SOLIDLINKEDBEER = rdfLib.Namespace('https://ozcanseker.inrupt.net/solidlinkedbeer#');\r\nconst FOAF = rdfLib.Namespace('http://xmlns.com/foaf/0.1/');\r\nconst LDP = rdfLib.Namespace('http://www.w3.org/ns/ldp#');\r\n\r\nclass SolidCommunicator {\r\n  /**\r\n   * Build the solid communicator\r\n   * @param {*} user \r\n   */\r\n  static async build(user) {\r\n    let values = await buildSolidCommunicator(user);\r\n\r\n    user.setName(values.user.name);\r\n    user.setImageUrl(values.user.imageURL);\r\n    user.addFriends(values.user.friends);\r\n    user.setBeerPoints(values.user.points);\r\n    user.setBeginDate(new Date(values.user.startdate));\r\n    user.setApplicationLocation(values.user.applicationLocation + \"beerdrinker/\");\r\n\r\n    await preApplicationHandelings(user.getApplicationLocation(), values.sc, user);\r\n\r\n    //make new solidCommunicator\r\n    let solidCommunicator = new SolidCommunicator(user, values.sc, user);\r\n\r\n    return solidCommunicator;\r\n  }\r\n\r\n  constructor(user, values) {\r\n    this._friendsStore = values.friendsStore;\r\n    this._friendGroup = values.group;\r\n    this._friendsRequested = values.sentGroup;\r\n\r\n    //user\r\n    this._user = user;\r\n  }\r\n\r\n  /**\r\n   * Get an user file \r\n   * @param {*} url \r\n   */\r\n  async getUserFile(url) {\r\n    return await getUserFile(url);\r\n  }\r\n\r\n  /**\r\n   * Check if user is already friend\r\n   * @param {*} url \r\n   */\r\n\r\n  async getInboxContents() {\r\n    let inbox = this._user.getApplicationLocation() + \"inbox/\"\r\n    let res = await fileClient.readFolder(inbox);\r\n    let files = [];\r\n\r\n    for (let index = 0; index < res.files.length; index++) {\r\n      let file = await this.fetchFile(res.files[index].url);\r\n      files.push(file);\r\n    }\r\n\r\n    return files;\r\n  }\r\n\r\n  async fetchFile(url) {\r\n    let graph = rdfLib.graph();\r\n    let fileTTL = await fileClient.readFile(url);\r\n\r\n    await rdfLib.parse(fileTTL, graph, url, \"text/turtle\");\r\n\r\n    let blanknode = graph.any(undefined, RDF('type'));\r\n\r\n    let type = graph.any(blanknode, RDF('type'));\r\n    let description = graph.any(blanknode, SOLIDLINKEDBEER('description'));\r\n    let from = graph.any(blanknode, SOLIDLINKEDBEER('from'));\r\n\r\n    let file = {\r\n      type: type.value.replace(/.*#/, \"\"),\r\n      from: from.value,\r\n      description: description.value,\r\n      url: url\r\n    }\r\n\r\n    return file;\r\n  }\r\n\r\n  checkIfUserIsFriend(url) {\r\n    let query1 = this._friendsStore.match(this._friendsRequested, VCARD('hasMember'), rdfLib.sym(url));\r\n    let query2 = this._friendsStore.match(this._friendGroup, VCARD('hasMember'), rdfLib.sym(url));\r\n\r\n    if (query1.length !== 0 || query2.length !== 0) {\r\n      console.log(\"already friend\");\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n   /**\r\n   * Send invitation to user for the application\r\n   * @param {*} urlInvitee \r\n   * @param {*} inbox \r\n   */\r\n  async inviteUserToSolib(urlInvitee, inbox) {\r\n    //name for file\r\n    let fileName = \"Social_Linked_Beer_invation_\" + (this._user.getName ? \"from_\" + this._user.getName() : \"\")\r\n    let invitation = (this._user.getName() ? this._user.getName() : this._user.getWebId()) + \" invites you to drink a beer with him on https://ozcanseker.github.io/Social-linked-beer/ .\";\r\n\r\n    //name of the location where it will be posted\r\n    let postLocation = inbox + fileName + \".ttl\";\r\n\r\n    //get ttl file for invitation\r\n    let invitationTTL = getInviteToLSBInvitation(urlInvitee, invitation, postLocation, this._user.getWebId());\r\n\r\n    await postSolidFile(inbox, fileName, invitationTTL);\r\n  }\r\n\r\n  /**\r\n   * Sends a friendship request to user\r\n   * @param {*} urlInvitee \r\n   * @param {*} appLocation \r\n   */\r\n  async sendFriendshipRequest(urlInvitee, appLocation) {\r\n    if (!this.checkIfUserIsFriend(urlInvitee)) {\r\n      //get url without https and profile card.me\r\n      let fileNameName = this._user.getWebId().replace(\"https://\", \"\").replace(/\\/.*/, \"\");\r\n\r\n      //make a file name\r\n      let fileName = \"Social_Linked_Beer_invation_from_\" + fileNameName;\r\n\r\n      //the invitation\r\n      let invitation = (this._user.getName() ? this._user.getName() : this._user.getWebId()) + \" invites you to share your stories with him.\";\r\n      \r\n      //locations to be posted\r\n      let location = appLocation + \"beerdrinker/inbox\";\r\n      let postLocation = location + fileName + \".ttl\";\r\n\r\n      //the ttl file\r\n      let invitationTTL = getFriendShipRequest(urlInvitee, invitation, postLocation, this._user.getWebId());\r\n\r\n      //add friend to friend request send\r\n      let friendsFile = this._user.getApplicationLocation() + 'friends.ttl';\r\n      this._friendsStore.add(this._friendsRequested, VCARD('hasMember'), rdfLib.sym(urlInvitee));\r\n      let friendsTTL = await rdfLib.serialize(undefined, this._friendsStore, friendsFile, 'text/turtle');\r\n\r\n      // send files\r\n      await postSolidFile(location, fileName, invitationTTL);\r\n      await putSolidFile(friendsFile, friendsTTL);\r\n    }\r\n  }\r\n\r\n  async declineFriendSchipRequest(message) {\r\n    //send a declined friendship request to other pod\r\n    let result = await this.getUserFile(message.from);\r\n    let inbox = result.appLocation + 'beerdrinker/inbox/';\r\n\r\n    //get file name and description string\r\n    let fileNameName = this._user.getWebId().replace(\"https://\", \"\").replace(/\\/.*/, \"\");\r\n    let fileName = \"Social_Linked_Beer_FriendschipRequestDecline_from_\" + fileNameName;\r\n    let invitation = (this._user.getName() ? this._user.getName() : this._user.getWebId()) + \" declined your friendship request.\";\r\n\r\n    //get the location is will be posted to\r\n    let postLocation = inbox + fileName + \".ttl\";\r\n\r\n    //make a text file and send\r\n    let declineTTL = getDeclineFriendshipRequest(message.from, invitation, postLocation, this._user.getWebId());\r\n\r\n    //delete friendship request from own pod\r\n    await postSolidFile(inbox, fileName, declineTTL);\r\n    await fileClient.deleteFile(message.url);\r\n  }\r\n\r\n  async acceptFriendSchipRequest(message) {\r\n    //get user\r\n    let friend = await fetchFriend(message.from);\r\n    let inbox = friend.getApplocation() + 'beerdrinker/inbox/';\r\n\r\n    //add user as friend\r\n    let friendsFile = this._user.getApplicationLocation() + 'friends.ttl';\r\n    this._friendsStore.add(this._friendGroup, VCARD('hasMember'), rdfLib.sym(message.from));\r\n    let friendsTTL = await rdfLib.serialize(undefined, this._friendsStore, friendsFile, 'text/turtle');\r\n\r\n    //get file name and description string\r\n    let fileNameName = this._user.getWebId().replace(\"https://\", \"\").replace(/\\/.*/, \"\");\r\n    let fileName = \"Social_Linked_Beer_FriendschipRequestAccepted_from_\" + fileNameName;\r\n    let description = (this._user.getName() ? this._user.getName() : this._user.getWebId()) + \" accepted your friendship request.\";\r\n\r\n    //get the location is will be posted to\r\n    let postLocation = inbox + fileName + \".ttl\";\r\n    \r\n    //make a text file and send\r\n    let acceptedTTL = getAcceptFriendshipRequest(message.from, description, postLocation, this._user.getWebId());\r\n\r\n    //send friendship accepted to user\r\n    await postSolidFile(inbox, fileName, acceptedTTL);\r\n    //delete friendship request from own pod      \r\n    await fileClient.deleteFile(message.url);\r\n    //update FriendsFile\r\n    await putSolidFile(friendsFile, friendsTTL);\r\n\r\n    this._user.addFriends(friend);\r\n  }\r\n}\r\n\r\n//after this\r\n//when opening folder pod check inbox and handle messages.\r\n//  -delete user from friendsrequested if declined\r\n//  -Add user to FriendsRequested\r\n//friendspage\r\n\r\nexport default SolidCommunicator;","import React from 'react';\r\nimport '../css/NavBar.scss'\r\n\r\nclass NavBar extends React.Component{\r\n    onInput = (e) => {\r\n        this.props.onBeerSearch(e.target.value);\r\n    }\r\n\r\n    render(){\r\n        let cldn =React.Children.toArray( this.props.children);\r\n        let input;\r\n\r\n        cldn = cldn.map((child, index) => {            \r\n            if(index !== cldn.length - 1){\r\n                return (\r\n                    <li key = {child.props.to} className = \"navBarOptionContainer\">\r\n                        {child}\r\n                    </li>\r\n                )\r\n            }else{\r\n                return(\r\n                    <li key = {child.props.to} className = \"navBarOptionContainerLast\">\r\n                        {child}\r\n                    </li>\r\n                )\r\n            }            \r\n        });\r\n\r\n        if(this.props.loggedIn){\r\n            input = (<li className = \"navBarSearch\">\r\n                <input  placeholder = \"search for beers\" value = {this.props.searchQuery} onChange = {this.onInput} />\r\n                <input type = \"button\" value = \"x\" onClick = {this.props.onSearchBarButtonClick}/>\r\n            </li>)\r\n        }\r\n\r\n        return(\r\n            <nav>\r\n                <ul id = \"navBar\">\r\n                    {cldn}\r\n                    {input}\r\n                </ul>\r\n            </nav>\r\n        )\r\n    }\r\n}\r\n\r\nexport default NavBar;\r\n","import React from 'react';\r\nimport Knipsel from '../../assets/Knipsel.png'\r\nimport '../css/Home.scss'\r\n\r\nclass Home extends React.Component{\r\n    render(){\r\n        return(\r\n            <section className = \"home\">\r\n                <h3>\r\n                    This is an application that is powered by Solid.<br/> \r\n                    Log in with your pod to use the application\r\n                </h3>\r\n                <br/>\r\n                <img src= {Knipsel} alt = \"Inrupt logo\"/>\r\n                <br/>\r\n                <h3 style = {{color : \"red\"}}>\r\n                    Carefull, This application is still in development and might mess up your pod.\r\n                    if you want to test it out, I recommend you make a new pod that you can delete\r\n                </h3>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport '../css/LogIn.scss'\r\n\r\nimport solidAuth from 'solid-auth-client'\r\n\r\nclass LogIn extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loginAsBrewer: false\r\n        }\r\n    }\r\n\r\n    onChangeCheckBox = () => {\r\n        this.setState({\r\n            loginAsBrewer: !this.state.loginAsBrewer\r\n        })\r\n    }\r\n\r\n    onButtonClick = () => {\r\n        let popupUri = './popup.html';\r\n        solidAuth.popupLogin({ popupUri }).then(() => {\r\n            solidAuth.currentSession().then(session => {\r\n                this.props.onLoggedIn();\r\n                this.props.history.push(`/profile`)\r\n            })\r\n        })\r\n    }\r\n\r\n    onRegisterClick = () => {\r\n        window.location.assign('https://inrupt.net/');\r\n    }\r\n\r\n    render() {\r\n        let typeLogIn;\r\n\r\n        if (this.state.loginAsBrewer) {\r\n            typeLogIn = <h1>Brewer</h1>\r\n        } else {\r\n            typeLogIn = <h1>Beer Drinker</h1>\r\n        }\r\n\r\n        let activeClass = this.state.loginAsBrewer ? \"logInBrewer\" : \"logInBeerDrinker\";\r\n\r\n        return (\r\n            <section className={[\"logInScreen \", activeClass].join(' ')}>\r\n                <div className=\"loginField\">\r\n                    {typeLogIn}\r\n                    <label className=\"switch\">\r\n                        <input type=\"checkbox\" onChange={this.onChangeCheckBox} />\r\n                        <span className=\"slider\"></span>\r\n                    </label>\r\n\r\n                    <br />\r\n                    <div>\r\n                        <button onClick = {this.onRegisterClick}>Register</button>\r\n                        <button onClick = {this.onButtonClick}>Log in</button>\r\n                    </div>\r\n\r\n                </div>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LogIn;\r\n","import React from 'react';\r\n\r\nclass Groups extends React.Component{\r\n\r\n    render(){\r\n        return(\r\n            <h1>\r\n                Groups\r\n            </h1>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Groups;\r\n","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport '../css/Friends.scss'\r\n\r\nclass Friends extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            inputText : \"\",\r\n            error : undefined\r\n        }\r\n    }\r\n\r\n    onChange = (e) => {\r\n        this.setState({\r\n            inputText: e.target.value\r\n        })        \r\n    }\r\n\r\n    onButtonClick = async () => {\r\n        let friends = this.props.user.getFriends();\r\n        friends = friends.filter(friend => {\r\n            let text = this.state.inputText.toUpperCase();\r\n            let friendUri = friend.getUri().toUpperCase();\r\n            let friendUri2 = friend.getUri().toUpperCase().replace(\"#ME\", \"\").replace(\"#I\", \"\");\r\n            let friendUri3 = friendUri.replace(\"HTTPS://\", \"\");\r\n            let friendUri4 = friendUri2.replace(\"HTTPS://\", \"\");\r\n            \r\n            return  friendUri === text || friendUri2 == text || friendUri3 == text || friendUri4 == text;\r\n        });\r\n\r\n        if (friends.length != 0){\r\n            let index = this.props.user.getFriends().map((profile, index) => {\r\n                if(friends[0].getUri() === profile.getUri()){\r\n                    return index;\r\n                }\r\n            }).filter(index => {return index})\r\n\r\n            this.props.history.push(`/friend/${index[0]}`);\r\n        } else if(this.props.user.getWebId() === this.state.inputText){\r\n            this.props.history.push(\"/profile\");\r\n        }else{\r\n            try{\r\n                let result = await this.props.solidCommunicator.getUserFile(this.state.inputText);\r\n                \r\n                    this.props.history.push({\r\n                        pathname:\"/user\",\r\n                        state:{\r\n                            result: result\r\n                        }\r\n                    });\r\n            }catch(e){\r\n                this.setState({error : e.message})\r\n            }\r\n        }\r\n    }\r\n\r\n    render(){\r\n        let friends = this.props.user.getFriends();\r\n        friends = friends.filter(friend => {\r\n            let text = this.state.inputText.toUpperCase();\r\n            if(friend.getName()){\r\n                return friend.getName().toUpperCase().includes(text) || friend.getUri().toUpperCase().includes(text);\r\n            }\r\n\r\n            return friend.getUri().toUpperCase().includes(text);\r\n        });\r\n        \r\n        let friendsElements = friends.map((friend, index) => {\r\n            return <li key = {friend.getUri()}>\r\n                <Link  to= {`/friend/${index}`}>\r\n                    <p>\r\n                        {friend.getName() ? friend.getName() : friend.getUri()}\r\n                    </p>\r\n                </Link>\r\n            </li> \r\n        });\r\n\r\n\r\n        return(\r\n            <section className = \"friends\">\r\n                <div className = \"searchFriends\">\r\n                    <h3>\r\n                        Make new friends\r\n                    </h3>\r\n                    <br/>\r\n                    <input type = \"text\" placeholder =\"profilecard link\" value = {this.state.inputText} onChange = {this.onChange}></input>\r\n                    <button onClick = {this.onButtonClick}>Search on the web</button>\r\n                    <p style = {{color: \"red\"}}>{this.state.error}</p>\r\n                </div>\r\n\r\n                <div className = \"friendSection\">\r\n                    <h3>\r\n                        Friends\r\n                    </h3>\r\n                    <ul >\r\n                        {friendsElements}\r\n                    </ul>\r\n                </div>\r\n\r\n\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Friends;\r\n","import React from 'react';\r\nimport '../css/Profile.scss'\r\nimport profilePic from '../../assets/profilePic.png'\r\n\r\nclass FriendPage extends React.Component{\r\n    constructor(props){\r\n        super(props); \r\n    }\r\n\r\n    render(){\r\n        let user = this.props.user.getFriendFromIndex(this.props.match.params.id);\r\n        let imgUrl = user.getImageUrl();\r\n\r\n        return(\r\n            <section className = \"profileScreen\">\r\n                \r\n                <div className=\"row\">\r\n                    <div className=\"leftColum\">\r\n                    <h1>\r\n                            {user.getName()}\r\n                        </h1>\r\n                            {/*TODO make image load faster*/}\r\n                            <img src = {imgUrl ? imgUrl : profilePic} alt = \"\"/>\r\n                        <p>\r\n                            check-ins : {0}\r\n                        </p>\r\n                        <p>\r\n                            reviews : 0\r\n                        </p>\r\n                        <p>\r\n                        Begin date : {dateToString(user.getStartDate())}\r\n                        </p>\r\n                        <p>\r\n                            beerbonus points : {user.getPoints()}\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"column\">\r\n                        <h1>\r\n                            Recent activities\r\n                        </h1>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        )\r\n    }\r\n} \r\n\r\nfunction dateToString(date){\r\n    var dd = String(date.getDate()).padStart(2, '0');\r\n    var mm = String(date.getMonth() + 1).padStart(2, '0');\r\n    var yyyy = date.getFullYear();\r\n\r\n    return dd + '/' + mm + '/' + yyyy; \r\n}\r\n\r\nexport default FriendPage;","import React from 'react';\r\n\r\nclass Friends extends React.Component{\r\n\r\n    render(){\r\n        return(\r\n            <h1>\r\n                Check-Ins\r\n            </h1>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Friends;\r\n","import React from 'react';\r\nimport '../css/BeerResults.scss';\r\nimport {Link} from \"react-router-dom\";\r\n\r\nclass BeerResults extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.list = [\r\n            {name: \"Hertog jan\"},\r\n            {name: \"Hertog jan\"},\r\n            {name: \"Hertog jan\"},\r\n            {name: \"Hertog jan\"},\r\n            {name: \"Hertog jan\"},\r\n            {name: \"Hertog jan\"},\r\n            {name: \"Hertog jan\"},\r\n            {name: \"Hertog jan\"},\r\n            {name: \"Hertog jan\"},\r\n            {name: \"Hertog jan\"},\r\n        ]\r\n    }\r\n\r\n\r\n    render(){\r\n        let elements = this.list.map(listItem => {\r\n                return (\r\n                    <li>\r\n                        <Link to = \"/beer/hertogJan\" onClick = {this.props.onLinkClick}>\r\n                            {listItem.name}\r\n                        </Link>\r\n                    </li>\r\n                )\r\n        })\r\n\r\n        return(\r\n            <div>\r\n                <h1>Beer Results</h1>\r\n                <ul>\r\n                    {elements}\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default BeerResults;\r\n\r\n","import React from 'react';\r\nimport '../css/Profile.scss'\r\nimport profilePic from '../../assets/profilePic.png'\r\n\r\nclass Profile extends React.Component{\r\n    render(){\r\n        let user = this.props.user;\r\n        let imgUrl = user.getImageUrl();\r\n\r\n        return(\r\n            <section className = \"profileScreen\">\r\n                \r\n                <div className=\"row\">\r\n                    <div className=\"leftColum\">\r\n                        <h1>\r\n                            {user.getName()}\r\n                        </h1>\r\n                            {/*TODO make image load faster*/}\r\n                            <img src = {imgUrl ? imgUrl : profilePic} alt = \"\"/>\r\n                        <p>\r\n                            check-ins : {0}\r\n                        </p>\r\n                        <p>\r\n                            reviews : 0\r\n                        </p>\r\n                        <p>\r\n                            Begin date : {dateToString(user.getBeginDate())}\r\n                        </p>\r\n                        <p>\r\n                            beerbonus points : {user.getBeerPoints()}\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"column\">\r\n                        <h1>\r\n                            Recent activities\r\n                        </h1>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nfunction dateToString(date){\r\n    var dd = String(date.getDate()).padStart(2, '0');\r\n    var mm = String(date.getMonth() + 1).padStart(2, '0');\r\n    var yyyy = date.getFullYear();\r\n\r\n    return dd + '/' + mm + '/' + yyyy;\r\n}\r\n\r\nexport default Profile;","import React from 'react';\r\nimport '../css/User.scss'\r\nimport profilePic from '../../assets/profilePic.png';\r\n\r\nclass User extends React.Component{ \r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            clicked: false\r\n        }\r\n    }\r\n\r\n    onNotJoinedButtonClick = async () => {\r\n        let result = this.props.location.state.result;\r\n        await this.props.solidCommunicator.inviteUserToSolib(result.url, result.inbox);\r\n\r\n        this.setState(\r\n            {\r\n                clicked : true}\r\n            );  \r\n    }\r\n\r\n    sendFriendShipRequest = async () => {\r\n        //TODO check if friendship request is already set\r\n        let result = this.props.location.state.result;\r\n        await this.props.solidCommunicator.sendFriendshipRequest(result.url, result.appLocation);\r\n\r\n        this.setState(\r\n            {\r\n                clicked : true}\r\n            );  \r\n    }\r\n\r\n    render(){\r\n        let result = this.props.location.state.result;\r\n        let button;\r\n\r\n        if(!this.state.clicked){\r\n            if(result.appLocation){\r\n                button = (<button onClick = {this.sendFriendShipRequest}>Send friendship request</button>);\r\n            }else{\r\n                button = (<button onClick = {this.onNotJoinedButtonClick}>Invite to Social linked beer</button>);\r\n            }\r\n        }else{\r\n            button = (<button disabled= {true}>Request send</button>)\r\n        }\r\n\r\n        return(\r\n            <section className = \"userPageNew\">\r\n                <div className = \"userPageHead\">              \r\n                    <h1>\r\n                        {result.name}\r\n                    </h1>\r\n                    <img src = {result.imageUrl ? result.imageUrl : profilePic} alt = \"\"/>\r\n                </div>\r\n                <div className = \"userButtonDiv\">\r\n                    {button}\r\n                </div>\r\n                <div className = \"userInfo\">\r\n                    <p>Uri : {result.url}</p>\r\n                    <p>Has social linked beer account?: {result.appLocation ? \"Yes\" : \"No\"}</p>\r\n                </div>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nexport default User;\r\n","import React from 'react';\r\nimport \"../css/Inbox.scss\";\r\n\r\nclass Inbox extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            messages : []\r\n        }\r\n    }\r\n\r\n    declineFriendShipRequest = async (index, message) => {\r\n        let array = this.state.messages;\r\n        array.splice(index, 1);\r\n        this.setState({messages: array})\r\n\r\n        await this.props.solidCommunicator.declineFriendSchipRequest(message);\r\n    }\r\n\r\n    acceptFriendShipRequest = async (index, message) => {\r\n        let array = this.state.messages;\r\n        array.splice(index, 1);\r\n        this.setState({messages: array})\r\n\r\n        await this.props.solidCommunicator.acceptFriendSchipRequest(message);\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.props.solidCommunicator.getInboxContents().then(res => {\r\n            this.setState({messages : res})\r\n        })\r\n    }\r\n\r\n    render(){\r\n        let items = this.state.messages.map((message, index)=> {\r\n            let buttonDiv;\r\n            \r\n            if(message.type === \"FriendshipRequest\"){\r\n                buttonDiv = (<div className = \"buttonDiv\">\r\n                    <button onClick = {() => this.declineFriendShipRequest(index,message)}>Decline</button>\r\n                    <button onClick = {() => this.acceptFriendShipRequest(index, message)}>Accept</button>\r\n                </div>)\r\n            }\r\n\r\n            return (<li key = {message.url}>\r\n                <h4>{message.type}</h4>\r\n                <p>from : {message.from}</p>\r\n                <p>{message.description}</p>\r\n                {buttonDiv}\r\n            </li>)\r\n        })\r\n\r\n        return(\r\n            <section className = \"inbox\">\r\n                <h1>\r\n                    Inbox\r\n                </h1>\r\n\r\n                <ul>\r\n                    {items}\r\n                </ul>\r\n                \r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Inbox;\r\n","import React from 'react';\r\n\r\nclass BeerDetailScreen extends React.Component{\r\n\r\n    render(){\r\n\r\n        return(\r\n            <h1>\r\n               {this.props.match.params.id}\r\n            </h1>\r\n        )\r\n    }\r\n}\r\n\r\nexport default BeerDetailScreen;\r\n","import React from 'react';\r\n\r\nimport {Switch, Route, withRouter, Redirect} from \"react-router-dom\";\r\n\r\n\r\n/**\r\n * Imported Pages\r\n */\r\nimport Home from './page/Home'\r\nimport LogIn from './page/LogIn'\r\nimport Groups from './page/Groups';\r\nimport Friends from './page/Friends';\r\nimport FriendsPage from './page/FriendPage';\r\nimport CheckIns from './page/CheckIns';\r\nimport BeerResults from './page/BeerResults';\r\nimport Profile from './page/Profile';\r\nimport UserPage from './page/User';\r\nimport Inbox from './page/Inbox';\r\nimport BeerDetailScreen from './page/BeerDetailScreen';\r\n\r\nclass AppRoutes extends React.Component{\r\n    render(){\r\n  \t  return(\r\n         <Switch>\r\n              <Route exact path=\"/\" component={Home} isLoggedIn = {this.props.loggedIn} solidCommunicator = {this.props.solidCommunicator}/>\r\n              <PrivateRoute path=\"/user\" component={UserPage} isLoggedIn = {this.props.loggedIn} solidCommunicator = {this.props.solidCommunicator}/> \r\n              <PrivateRoute path=\"/beer/:id\" component={BeerDetailScreen} isLoggedIn = {this.props.loggedIn}/> \r\n              <PrivateRoute exact path=\"/friend\" component={Friends} isLoggedIn = {this.props.loggedIn} user = {this.props.userObject} solidCommunicator = {this.props.solidCommunicator}/>\r\n              <PrivateRoute path=\"/friend/:id\" component={FriendsPage} isLoggedIn = {this.props.loggedIn} user = {this.props.userObject}/>\r\n              <PrivateRoute path=\"/beerresults\" component={BeerResults} isLoggedIn = {this.props.loggedIn} onLinkClick = {this.props.clearSearchQuery}/>\r\n              <PrivateRoute path=\"/groups\" component={Groups} isLoggedIn = {this.props.loggedIn}/>\r\n              <PrivateRoute path='/profile' component={Profile} isLoggedIn = {this.props.loggedIn} user = {this.props.userObject}/>\r\n              <PrivateRoute path='/checkIns' component={CheckIns} isLoggedIn = {this.props.loggedIn}/>\r\n              <PrivateRoute path='/inbox' component={Inbox} isLoggedIn = {this.props.loggedIn} solidCommunicator = {this.props.solidCommunicator}/>\r\n              <PrivateRouteLogIn path=\"/login\" component={LogIn} isLoggedIn = {this.props.loggedIn} onLoggedIn = {this.props.onLoggedIn}/>\r\n          </Switch>)\r\n    }\r\n}\r\n\r\nconst PrivateRoute = ({ component: Component, isLoggedIn ,...rest }) => (\r\n    <Route {...rest} render={(props) => (\r\n      isLoggedIn\r\n      ?   <Component {...props} {...rest}/>\r\n      : <Redirect to='/' />\r\n    )} />\r\n  )\r\n  \r\n  const PrivateRouteLogIn = ({ component: Component, isLoggedIn, onLoggedIn ,...rest }) => (\r\n    <Route {...rest} render={(props) => (\r\n      !isLoggedIn\r\n        ? <Component onLoggedIn = {onLoggedIn} {...props} />\r\n        : <Redirect to='/profile' />\r\n    )} />\r\n  )\r\n\r\nexport default withRouter(AppRoutes);","import React from 'react';\r\nimport '../css/AclErrorPage.scss';\r\n\r\nclass AclErrorPage extends React.Component{\r\n    render(){\r\n        return (<section className = \"aclErrorPage\">\r\n            <h1>\r\n             The application does not have correct access. please give the application read, write, append and control access. \r\n            </h1>\r\n        </section>)\r\n    }\r\n}\r\n\r\nexport default AclErrorPage;","import React from 'react';\r\nimport '../css/FetchingPage.scss';\r\n\r\nclass FetchingPage extends React.Component {\r\n    render() {\r\n        return (\r\n            <section className= \"rendering\">\r\n                <h1>Fetching data</h1>\r\n                <div id=\"fetchinAnimation\"></div>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nexport default FetchingPage;","class User {\r\n    constructor(uri){\r\n        this._uri = uri\r\n\r\n        this._name = undefined;\r\n        this._imageUrl = undefined;\r\n        this._beginDate = undefined;\r\n        this._beerPoints = 0;\r\n        this._friends = [];\r\n        this._applicationLocation = undefined;\r\n\r\n        //mvc\r\n        this._subscribers = [];\r\n    }\r\n\r\n    upDateSubScribers(){\r\n        this._subscribers.map(subscriber => subscriber.update());\r\n    }\r\n\r\n    subscribe(subscriber){\r\n        this._subscribers.push(subscriber);\r\n    } \r\n\r\n    unsubscribe(subscriber){\r\n        this._subscribers.filter(subscriberList  => {\r\n            return subscriberList !== subscriber;\r\n        });\r\n    }\r\n\r\n    addFriends(newFriends){\r\n        this._friends = this._friends.concat(newFriends)\r\n        this.upDateSubScribers();\r\n    }\r\n\r\n    addFriend(newFriend){\r\n        this._friends.push(newFriend);\r\n        this.upDateSubScribers();\r\n    }\r\n\r\n    setName(name){\r\n        this._name = name;\r\n    }\r\n\r\n    setImageUrl(imageUrl){\r\n        this._imageUrl = imageUrl;\r\n    }\r\n\r\n    setBeerPoints(beerPoints){\r\n        this._beerPoints = beerPoints;\r\n        this.upDateSubScribers();\r\n    }\r\n\r\n    setBeginDate(beginDate){\r\n        this._beginDate = beginDate;\r\n        this.upDateSubScribers();\r\n    }\r\n\r\n    setApplicationLocation(applicationLocation){\r\n        this._applicationLocation = applicationLocation;\r\n        this.upDateSubScribers();\r\n    }\r\n\r\n    getWebId(){\r\n        return this._uri;\r\n    }\r\n\r\n    getFriends(){\r\n        return this._friends;\r\n    }\r\n\r\n    getFriendFromIndex(index){\r\n        return this._friends[index];\r\n    }\r\n\r\n    getBeginDate(){\r\n        return  new Date(this._beginDate.getTime());\r\n    }\r\n\r\n    getImageUrl(){\r\n        return this._imageUrl;\r\n    }\r\n\r\n    getName(){\r\n        return this._name;\r\n    }\r\n\r\n    getBeerPoints(){\r\n        return this._beerPoints;\r\n    }\r\n\r\n    getApplicationLocation(){\r\n        return this._applicationLocation;\r\n    }\r\n\r\n}\r\n\r\nexport default User;","/**\n * Libs\n */\nimport React from 'react';\nimport solidAuth from 'solid-auth-client'\nimport { Link, withRouter } from \"react-router-dom\";\nimport SolidCommunicator from './solid/SolidCommunicator'\n\n\n/**\n * Components\n */\nimport NavBar from './component/NavBar';\nimport AppRoutes from './routes/AppRoutes'\nimport AclErrorPage from './routes/extrapage/AclErrorPage'\nimport FetchingPage from './routes/extrapage/FetchingPage'\n\n/**\n * Errors\n */\nimport AccessError from './error/AccessError'\n\n/**\n * Assests\n */\nimport './css/App.scss';\nimport Knipsel from './assets/Knipsel.png'\nimport Logo from './assets/logo.png'\nimport User from './model/User';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loggedIn: false,\n      searchQuery: '',\n      userObject: undefined,\n      solidCommunicator: undefined,\n      accessError: false,\n      fetchingFiles: false\n    }\n  }\n\n  componentDidMount() {\n    this.checkLoggedIn();\n  }\n\n  update = () => {\n    this.setState({\n      update: true\n    })\n  }\n\n  clearSearchQuery = () => {\n    this.setState({\n      searchQuery: ''\n    })\n  }\n\n  checkLoggedIn = async () => {\n    let session = await solidAuth.currentSession();\n    //TODO error handling\n\n    if (session) {\n      this.setState({\n        fetchingFiles: true\n      });\n\n      //make new user\n      let user = new User(session.webId);\n      user.subscribe(this);\n\n      try {\n        let solidCommunicator = await SolidCommunicator.build(user);\n\n        this.setState({\n          userObject: user,\n          solidCommunicator: solidCommunicator,\n          loggedIn: true,\n          fetchingFiles: false\n        })\n\n        this.props.history.push(`/`)\n\n      } catch (e) {\n        if (e instanceof AccessError) {\n          this.setState({\n            accessError: true,\n            fetchingFiles: false\n          })\n        } else {\n          throw e; // let others bubble up\n        }\n      }\n    }\n  }\n\n\n  onClickLogOut = () => {\n    solidAuth.logout();\n\n    this.setState({\n      loggedIn: false,\n      userObject: undefined,\n      accessError : false\n    });\n  }\n\n  onLoggedIn = () => {\n    this.checkLoggedIn();\n  }\n\n  onBeerSearch = (text) => {\n    let location = this.props.location.pathname;\n\n    this.setState({\n      searchQuery: text\n    })\n\n    if (text) {\n      if (location !== \"/beerresults\") {\n        this.props.history.push(\"/beerresults\");\n      }\n\n      /**\n       * Vindt hier de bier\n       */\n    } else {\n      this.props.history.goBack();\n    }\n  }\n\n\n  render() {\n    let navBar;\n    let app;\n\n    if(this.state.fetchingFiles){\n      navBar = (\n        <NavBar onSearchBarButtonClick={this.onSearchBarButtonClick}>\n          <Link to=\"/\" onClick={this.onClickLogOut}></Link>\n        </NavBar>)\n    }else if(this.state.accessError){\n      navBar = (\n        <NavBar onSearchBarButtonClick={this.onSearchBarButtonClick}>\n          <Link to=\"/\" onClick={this.onClickLogOut}>Log out</Link>\n        </NavBar>)\n    } else if (this.state.loggedIn) {\n      navBar = (\n        <NavBar onSearchBarButtonClick={this.onSearchBarButtonClick}\n          onBeerSearch={this.onBeerSearch}\n          loggedIn={this.state.loggedIn}\n          searchQuery={this.state.searchQuery}>\n          <Link to=\"/profile\">Profile</Link>\n          <Link to=\"/checkIns\">Check ins</Link>\n          <Link to=\"/friend\">Friends</Link>\n          <Link to=\"/groups\">Groups</Link>\n          <Link to=\"/inbox\">Inbox</Link>\n          <Link to=\"/\" onClick={this.onClickLogOut}>Log out</Link>\n        </NavBar>\n      )\n    } else {\n      navBar = (\n        <NavBar onBeerSearch={this.onBeerSearch} loggedIn={this.state.loggedIn}>\n          <Link to=\"/LogIn\">Log in</Link>\n        </NavBar>\n      )\n    }\n\n    if(this.state.fetchingFiles){\n      app = (<FetchingPage/>);\n    }else if (this.state.accessError) {\n      app = (<AclErrorPage/>);  \n    } else {\n      app = (<AppRoutes\n        loggedIn={this.state.loggedIn}\n        userObject={this.state.userObject}\n        solidCommunicator={this.state.solidCommunicator}\n        clearSearchQuery={this.clearSearchQuery}\n        onLoggedIn={this.onLoggedIn}\n      />)\n    }\n\n    return (\n      <div id=\"AppRoot\">\n        <header>\n          <Link to=\"/\">\n            <div>\n              <img src={Logo} alt=\"\" />\n              <h1>\n                Linked social beer\n              </h1>\n            </div>\n          </Link>\n        </header>\n\n        {navBar}\n        {app}\n        <footer>\n          <span>\n            This application is powered by\n            </span>\n          <a href=\"https://solid.inrupt.com\">\n            <img alt=\"Solid inrupt\" src={Knipsel} />\n          </a>\n        </footer>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter, HashRouter } from \"react-router-dom\";\n\nReactDOM.render(\n <HashRouter basename={process.env.PUBLIC_URL}>\n    <App />\n  </HashRouter>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/profilePic.b6681619.png\";"],"sourceRoot":""}